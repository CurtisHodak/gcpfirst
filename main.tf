# resource "google_storage_bucket" "cheap_bucket" {
#   name                        = "curtis-cheap-demo-${random_id.suffix.hex}"
#   location                    = "US-CENTRAL1"   # free-tier eligible; keep Standard storage
#   storage_class               = "STANDARD"
#   uniform_bucket_level_access = true

#   # Prevent accidental public access
#   public_access_prevention = "enforced"

#   # Auto-clean to avoid surprises
#   lifecycle_rule {
#     condition { age = 30 }   # delete objects older than 30 days
#     action    { type = "Delete" }
#   }

#   force_destroy = true  # allows terraform destroy even if objects exist
# }

# resource "random_id" "suffix" {
#   byte_length = 3
# }


module "my_workerpool" {
  source = "github.com/spacelift-io/terraform-google-spacelift-workerpool?ref=v1.2.0"

  configuration = <<-EOT
    export SPACELIFT_TOKEN="eyJicm9rZXIiOnsiZW5kcG9pbnQiOiJ3b3JrZXItaW90LnNwYWNlbGlmdC5pbyIsInB1Ymxpc2hfY2hhbm5lbF9mb3JtYXQiOiJzcGFjZWxpZnQvd3JpdGVvbmx5LzAxSzI1SjJGMUVIMEI1OThCODlRMjFFTTFDLyVzIiwic3Vic2NyaWJlX2NoYW5uZWxfZm9ybWF0Ijoic3BhY2VsaWZ0L3JlYWRvbmx5LzAxSzI1SjJGMUVIMEI1OThCODlRMjFFTTFDLyVzIiwiY2FfY2VydGlmaWNhdGVzIjpudWxsfSwicG9vbF9jZXJ0IjoiLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tXG5NSUlFMFRDQ0E3bWdBd0lCQWdJVWRFTHpXOEFaSzBmd3ViUTVXeGJORC9vV2hld3dEUVlKS29aSWh2Y05BUUVMXG5CUUF3VFRGTE1Fa0dBMVVFQ3d4Q1FXMWhlbTl1SUZkbFlpQlRaWEoyYVdObGN5QlBQVUZ0WVhwdmJpNWpiMjBnXG5TVzVqTGlCTVBWTmxZWFIwYkdVZ1UxUTlWMkZ6YUdsdVozUnZiaUJEUFZWVE1CNFhEVEkxTURnd09ERTVNVGt3XG5OMW9YRFRRNU1USXpNVEl6TlRrMU9Wb3dnWlV4Q3pBSkJnTlZCQVlUQWxWVE1RMHdDd1lEVlFRSURBUlBhR2x2XG5NUlV3RXdZRFZRUUhEQXhTWlhsdWIyeGtjMkoxY21jeEVqQVFCZ05WQkFvTUNWTndZV05sYkdsbWRERVFNQTRHXG5BMVVFQ3d3SFUzVndjRzl5ZERFVk1CTUdBMVVFQXd3TWMzQmhZMlZzYVdaMExtbHZNU013SVFZSktvWklodmNOXG5BUWtCRmhSamRYSjBhWE5vUUhOd1lXTmxiR2xtZEM1cGJ6Q0NBaUl3RFFZSktvWklodmNOQVFFQkJRQURnZ0lQXG5BRENDQWdvQ2dnSUJBTndNWDJLMkY0dWt1Ky9vdFJtZ1BiMmNzd2NsMnFraXpTb3pxTnVWRUdrbWpSOUttUmZwXG5GbmVONGxzUkdQMnlGeno3YnpMNHFzRjljaDcyczlMUWlCQVpPaDZ5L1gyWVBkVG9vOU5YUlpEYnliSytPNDI4XG51MGxvUzVaajBpTDE4cTRLeHUrWlhybzJSZWNpZVhQWVZwclFsMWFwZ1VvNVZjdGtmN3ArVnkxWVoyalpSekR2XG5VRFJDRHA1NTYrZXRNTWtUdUhLYXFmMjFWVVlIOUhmRTRVc29DSjMxOGJza2tzN1hNUTFvZnJlcUlyaXRiLzlLXG51bHRmdVNoSUUwT1RPTEFxa3dPZGJ5MFhNWjNrQ2kxWXc0RkwxS1Z5T1JQc1FxMzVZTGVvVUM5L1QvY3FUR2k3XG56M1ZMa1hNM0xEOStBQ2V2QWtsUU1qNHFWY0YrNCttTEE0UEo0WFgydGI5VmVocSs3MVNIUENnd1ZYWjlkTGRrXG5KTjFZNnFRQmpLRS9RQXRtNGdYc3YwV1k3MG1ER2I4dmhwNUFSWnExM2pFTHVFVlVDS0RYcEY1d3crVHAyVHFWXG5ZRXZXUU4wUmZjS2R4OElTQkRUdnh1ZWkrek1WN0dBbTdaUDBoNnJ0WXBCRmtIa3o1RXhUakhuVXZiWFVPREE5XG5pUElrSUxiQTJuVU53dkRqTEtkY2dBQTFzTTlQb3R5TlFNeXZyOXFuRHFyMnRDdGJpbDhGQlgxalMxYVgrNTFJXG5tRlFDZHVIRytkQ1E1aDJwZFlzMkdKT3VKWG9jMDdvelI3ajEySWtXOGJwcGt0R1ZJSlJXU1dwd2FCajU5OXBxXG5na2ZVRkVKVjJiek02RXBuZ0d2RE8vSkFpNTdtUTdpdHdjdFpKbFpuU0VHZjdoY3A3eFZINUxNNUFnTUJBQUdqXG5ZREJlTUI4R0ExVWRJd1FZTUJhQUZCOUd0TUdvOXhteVp1VkdKTGN3cy92UEh0bmlNQjBHQTFVZERnUVdCQlFvXG5hZllLZ0tUbXErb2xVTnh6R1puWVhQbGlSekFNQmdOVkhSTUJBZjhFQWpBQU1BNEdBMVVkRHdFQi93UUVBd0lIXG5nREFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBcUxuV0FlM0lvUWlWKzdNcWVHbFowalBmN25MUlRBd3orU2wvXG5VdGQ4L2g1SXI0MVR1TVVsWDFiM1Zwd1p4VzEybWwyWkd0RWF4NDBCZm5zcDhacFJRcFhoZHFMVlVDb1B3bktzXG5TaG5ZQjc2NXFSU3BRTVNvTzBTVVE3YVdBbjlVSTI0b0xYbmluTkNDSUp0U2RscnNhcmNna2FxWXUzZFJOR2ZpXG5uTjUwU2xmMEUwMElPdnlnak9sU2s2T0x5Y29mNXRyVVh3dlQvTW1MWlpDczkyNjA2VE42NERSUDd5L1Q0U2dPXG56bFpMSjNpSEhYRHNINDZpc1VFM1Y1TDZZM2RFUS8zNUVrNHQrZ0p4OGNFZDJ4Tk5vY1RLb3l6emU1NkZIOHpFXG4xUkd2TWlXZ2NaWEg3amJibDlpVkY1aEo4QzdYOEhJamFZbUJyUlJOVE1jeFdCSTkrZz09XG4tLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tXG4iLCJ3b3JrZXJfcG9vbF91bGlkIjoiMDFLMjVKMkYxRUgwQjU5OEI4OVEyMUVNMUMifQ=="
    export SPACELIFT_POOL_PRIVATE_KEY="LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpSQUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1M0d2dna3FBZ0VBQW9JQ0FRRGNERjlpdGhlTHBMdnYKNkxVWm9EMjluTE1ISmRxcElzMHFNNmpibFJCcEpvMGZTcGtYNlJaM2plSmJFUmo5c2hjOCsyOHkrS3JCZlhJZQo5clBTMElnUUdUb2VzdjE5bUQzVTZLUFRWMFdRMjhteXZqdU52THRKYUV1V1k5SWk5Zkt1Q3Nidm1WNjZOa1huCklubHoyRmFhMEpkV3FZRktPVlhMWkgrNmZsY3RXR2RvMlVjdzcxQTBRZzZlZWV2bnJUREpFN2h5bXFuOXRWVkcKQi9SM3hPRkxLQWlkOWZHN0pKTE8xekVOYUg2M3FpSzRyVy8vU3JwYlg3a29TQk5Ea3ppd0twTURuVzh0RnpHZAo1QW90V01PQlM5U2xjamtUN0VLdCtXQzNxRkF2ZjAvM0treG91ODkxUzVGek55dy9mZ0FucndKSlVESStLbFhCCmZ1UHBpd09EeWVGMTlyVy9WWG9hdnU5VWh6d29NRlYyZlhTM1pDVGRXT3FrQVl5aFAwQUxadUlGN0w5Rm1POUoKZ3htL0w0YWVRRVdhdGQ0eEM3aEZWQWlnMTZSZWNNUGs2ZGs2bFdCTDFrRGRFWDNDbmNmQ0VnUTA3OGJub3ZzegpGZXhnSnUyVDlJZXE3V0tRUlpCNU0rUk1VNHg1MUwyMTFEZ3dQWWp5SkNDMndOcDFEY0x3NHl5blhJQUFOYkRQClQ2TGNqVURNcjYvYXB3NnE5clFyVzRwZkJRVjlZMHRXbC91ZFNKaFVBbmJoeHZuUWtPWWRxWFdMTmhpVHJpVjYKSE5PNk0wZTQ5ZGlKRnZHNmFaTFJsU0NVVmtscWNHZ1krZmZhYW9KSDFCUkNWZG04ek9oS1o0QnJ3enZ5UUl1ZQo1a080cmNITFdTWldaMGhCbis0WEtlOFZSK1N6T1FJREFRQUJBb0lDQUNGY2Z0bW9ZY2w2SUVRdk04VysxWjE1CnRHclJBbVhDTVBqRS9FVE9STDZzYVpqazVuRUpsYTVxaEhicUVLL2w0RUFPbnIxTGxoZmZ2UDJVeVk2Y3J3UkIKenQzNHBSWDFqdXBJbXczZm5WeG85aHR6Vy9RUk9SUFlEQjJ3NUpzSVR0SzBMNVVEMjZpL3NibHBNS0N2bS9HOAp6alVGWGVTeTdKNzVqYVBvbzY3c1NFRk5MODNyZW0xeDFtV1Fkb09aYmx3TjhWanV1ZmNORnZDWEpDbEVZQ1BVCjNmbVU0Q0ZQV2pLaHpYNEs2YXRPMEJUUHRyc3R5VE14UUJFclhFQlNnYld6dnJZOW1DMXQ1c2ZaV3ZHbEUzNzIKMERhRktzSXFmN0dBclhrcXUzMTMvOWVwUWd4ZTdRVUxmL0hIMjUyRXJPRlhWekZtUnpmRmsxclNzaHNtU0ZIYQpxL2VSY3BlbkRROWRGcGdMRGlZdURCbG1Sa3dOMXAzR0c4UENhVzN2WGJRcnJlODAvSUtNZER4cnMwdjVXcitFCkZkSk50L1lGdDBseHRwMko5V0tlNzdrN3QwRUIyWmE5bG5Lbkd5dFpGZGhJbHkxeEdYU0s4SUZta3JNUFNBZnAKem9wcTdXSGtwOEZZZi9zeDI0OVNRdUpBYjU2WlFzYlEySkxWWjBVbEt4SUdURW5rTFNFb0RmWE1mN1hFTHBVagpRamRiemxkYUlVcG5GQ2xtRlNQOU03cVJRNmR5NWdzU3BwaFp6a0FaODBtWlRNSHJGb0dnRFRuSXNsc0FBMmJ5ClB5ai82VUduU0ljZDNDTHNUZ3JiaTFlaXZRVVhkbkdDbUZzUlpKd0llYXFyVHczYzZjbm1Dd0cyM1Nkd3AwT0gKOG9tc21qUWdVY1RpazRVdWRjWkJBb0lCQVFENUxhajV5YTlURXRjZFUxcXd6VFZHYzFucEdhdTAyVlFCaXRKUQpwb2d4YzNrUGpNWW1vNExDb3ZBbmdqOXBLUTNjV1BFaDREUzZZd1MzK1kwWWxGTFR1K0FBdlE0aE15SnVxZWd2CkE2RDY3Y1NoUThneElWY3BaTDJSSWVpRlRZOUovSHpZZC9hc2tibHpIckh5VGhEbFgzdm9TZld1SFdvUEJLN0YKRjF1TyticldMQjNTRDUzUVJsTDNOTkpCTGRXTGEwUmh4N1UxTFVxZWRMWE9MczUrTGx0SjRRYW5pb0EvQVJnNwpnL0lwZFo5QXlFZVpyWmgvRjJKVEZRazFSaDFISmdIUkRNZGNmQWV2WnFRKzhZa0tuM1NtbGdFNkErNWhKY09UCkNDT29EQ0tOQU1NeDJpQVZDNU9Xa2tSeUcrZEx3eU1aMmU0OGZraVFqMGF2Z3FkbkFvSUJBUURpRW83T2ZWa2oKckZyZURnaWl2bnFqVk84c0VUSHFscTFLV1dHYjhuVEJwYnJwTmd6K1NJQThXOGtUZFJYcWVDR0hQVXZvcGhVYwpvc1phN0hmbnpJYkM1WmZJOFdLaWZJQ2RRTXJtUGtzcG4ycTVVY29jREJENjVvY1FCWlRaWjFzd1d0YmJBSWZSCm9xcFBYMFhTMlBnSnNjdGJMOHl0RU5aUWZNLzRuYm55bnBDMVBTR2xEYmpWSjhJb0RsZXluQUFwMllzdzdqOVUKRDUvTk11cm9qUXVXbHMzVWloU2E3MSt6VnYrSnBESktGVXcwS0tXRmh4a2J0WjdaZ21qS0d2elRPckNGVWliNgpzQzY3THBURTN1ajdyY08wak82Q3BONWVlazNkbjE4WDd3bWh4WUN2UjBNZ3A5VFkvMmtvdCt2bnQ2cmZyUGVaCnMwZXZheVpaMmt4ZkFvSUJBUUNJc0hxRVpCWHdYV0p4N05yUUtCSDBqcXlneVhzKzN3Vk5QMGoyQXhTdEErcEMKRkhoU2s5blVTYXV5RUtvV1Z2WUtqU1BoOEdzY1g5c2p6UnFRaERVWGYzVjNFajZoQ2JyMnQrL3RjbkVwbGFzSwp4L01XdUhKbSs2TmQ3UnJ2blVkZ1Q4aHd1d1l2VGxWTUNHZVhReW5UbWRpUDZacURKQkdkSVhWNkdzRVlJbmhTCnFxckZJOW52ZWRSalZhK05IOGFJRDVUWWlzUWw0cTJQVlBpeW5VeWJQWFRJaDArdU1yVDlXdTFmSUplRUZNa0MKc1p0TmUwUXZXN1dOVy9uTUpxVkM5VitEdlIzVDV4b1VKeHNzaURVa0JhcnBBMXF5NTVzcDRaeHltTUZ1bXhHTgpCZ0VONU5rNmtqb3BIQjI5OXY2ZnVmRVVhazlkRWUxZWw2b3Y5MTA3QW9JQkFRRFV4eWkzK3N5U1FkK0lqbWJjClhqRnBWMENCRm5JSDNPZWZTYjhRRzBSL0dyQndYWm9mSHpmckYyeUtycklBN0M2S2JrdnEzWjZUUkRVelVNdU8KVlRjbGF4alFYVGs3dTdrRnlQenZkZ1FpV2RRR05vL21sQWpMVFh3anZVMGF6aWZLdkVUcS9YWFgvcVVUYlpWMwpYUlVmY3NMMndXZUFJSS9HVTZNZTJiMHhPTUwwZ21RUFNIb0Z6WlQxUklLUUxqb05LWjdUWC9vazhVdXp3OC9MCkx5MlAvOEljNEJXQ3VmZzJBSlVsQkhEOHYwem83clRUbDVNdlBHTVZUNk8zVFcxV2xpK2NXL1VxRC9iNzRGelAKYXdxWUR6VmEweWFOdWdVOW9SbDJsVkRZWXZpSzFTeElUT2RHYmhCc2FRQ2QvWFhBczJMVmdhUE5leXJtVlJCVQprNTA3QW9JQkFRRHc3KzRoRTJpTWVpZDhac1lkanRDZ0hWK3gxZk1LYW04SlJQeEFjck03ZGhiVnBjc3hXNUFXCmQ3OHJ5aDhpM0FBNkpCdjhaWmkrZTdLa1dRemMwRDBKaUV4bHdCZE16ZXBoVFYwU04xREVoSk82SEpCUnBPWXkKbS9PMmc1dEdZNStpMzJoUE55WGljeG5qVDFScCsvL3g2OVJOZ2duZ2JFVVVxSklCQlpJZUhyL2g0RkoydUF3cgpUdFZ2dHo2dzV3WEd1UFhiTFkwRTQrS2RPT0JhSjFOcURCMU1KUjVTRVdDWUZCVzFWMWJCTVRrK1N1cXJ0VlJaCktuS3RyM09DdUt4TkJLNHd3S1dSdU8rTzEzbEYrUnRVRGQ3TGVuQ29lM0h2TDY4eFpUUTNKWE9JSXpSUnBvdVcKT1dNQnNHU1cwQnlNbU1kRHNSUUJNNmkrV1RncUN4MHYKLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQ=="
  EOT

  image   = "projects/spacelift-workers/global/images/spacelift-worker-us-1634112379-tmoys2fp"
  network = "default"
  region  = "us-central1"
  zone    = "us-central1-a"
  size    = 2
  email   = "spacelift-oidc-test@curtisgcpproject.iam.gserviceaccount.com"
  
  providers = {
    google = google
  }
}